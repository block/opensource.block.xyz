---
import ContentPageLayout from "@/layouts/ContentPageLayout.astro";
import BlogSection from "@/components/blog/BlogSection.astro"
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);

const title = "Blog";
const description = "All the news that's fit to read from the Block Open Source team";

// Extract unique categories from posts
const allCategories = ["All"];
const postCategories = [...new Set(posts.flatMap(post => post.data.tags || []))];
allCategories.push(...postCategories.map(cat => cat.charAt(0).toUpperCase() + cat.slice(1)));
---

<ContentPageLayout title={title}
  showBreadcrumbs={false}
  showTitleAsH1={false}>

  <BlogSection
    title={title}
    description={description}
    posts={posts}
    layout="modern"
    showExcerpts={true}
    showTags={true}
    showAuthors={true}
    showReadTime={true}
    showCategories={true}
    categories={allCategories}
    activeCategory="All"
  />

</ContentPageLayout>